<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cart & Checkout - GaramDoodh</title>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <style>
    /* Extra styling for merged checkout */
    .checkout-section form input,
    .checkout-section form textarea,
    .checkout-section form select {
      width: 100%;
      padding: 12px;
      margin: 8px 0;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 14px;
    }
    .checkout-section form button {
      width: 100%;
      padding: 14px;
      margin-top: 15px;
      background: #28a745;
      color: #fff;
      border: none;
      border-radius: 6px;
      font-size: 16px;
      cursor: pointer;
      transition: background 0.3s;
    }
    .checkout-section form button:hover {
      background: #218838;
    }
    #orderResult {
      margin-top: 15px;
      text-align: center;
      font-weight: bold;
    }
    #orderResult.success { color: green; }
    #orderResult.error { color: red; }

    /* Order placed animation overlay */
    .order-anim-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
    }
    .order-anim-overlay.hidden { display: none; }

    /* Animation button styles (scoped) */
    :root {
      --primary: #275EFE;
      --primary-light: #7699FF;
      --dark: #1C212E;
      --grey-dark: #3F4656;
      --grey: #6C7486;
      --grey-light: #CDD9ED;
      --white: #FFF;
      --green: #16BF78;
      --sand: #DCB773;
      --sand-light: #EDD9A9;
    }
    .order {
      -webkit-appearance: none;
         -moz-appearance: none;
              appearance: none;
      border: 0;
      background: var(--dark);
      position: relative;
      height: 63px;
      width: 240px;
      padding: 0;
      outline: none;
      cursor: pointer;
      border-radius: 32px;
      -webkit-mask-image: -webkit-radial-gradient(white, black);
      -webkit-tap-highlight-color: transparent;
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    .order span {
      --o: 1;
      position: absolute;
      left: 0;
      right: 0;
      text-align: center;
      top: 19px;
      line-height: 24px;
      color: var(--white);
      font-size: 16px;
      font-weight: 500;
      opacity: var(--o);
      transition: opacity 0.3s ease;
    }
    .order span.default { transition-delay: 0.3s; }
    .order span.success { --offset: 16px; --o: 0; }
    .order span.success svg {
      width: 12px;
      height: 10px;
      display: inline-block;
      vertical-align: top;
      fill: none;
      margin: 7px 0 0 4px;
      stroke: var(--green);
      stroke-width: 2;
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-dasharray: 16px;
      stroke-dashoffset: var(--offset);
      transition: stroke-dashoffset 0.3s ease;
    }
    .order:active { transform: scale(0.96); }
    .order .lines {
      opacity: 0;
      position: absolute;
      height: 3px;
      background: var(--white);
      border-radius: 2px;
      width: 6px;
      top: 30px;
      left: 100%;
      box-shadow: 15px 0 0 var(--white), 30px 0 0 var(--white), 45px 0 0 var(--white), 60px 0 0 var(--white), 75px 0 0 var(--white), 90px 0 0 var(--white), 105px 0 0 var(--white), 120px 0 0 var(--white), 135px 0 0 var(--white), 150px 0 0 var(--white), 165px 0 0 var(--white), 180px 0 0 var(--white), 195px 0 0 var(--white), 210px 0 0 var(--white), 225px 0 0 var(--white), 240px 0 0 var(--white), 255px 0 0 var(--white), 270px 0 0 var(--white), 285px 0 0 var(--white), 300px 0 0 var(--white), 315px 0 0 var(--white), 330px 0 0 var(--white);
    }
    .order .back,
    .order .box {
      --start: var(--white);
      --stop: var(--grey-light);
      border-radius: 2px;
      background: linear-gradient(var(--start), var(--stop));
      position: absolute;
    }
    .order .truck {
      width: 60px;
      height: 41px;
      left: 100%;
      z-index: 1;
      top: 11px;
      position: absolute;
      transform: translateX(24px);
    }
    .order .truck:before, .order .truck:after {
      --r: -90deg;
      content: "";
      height: 2px;
      width: 20px;
      right: 58px;
      position: absolute;
      display: block;
      background: var(--white);
      border-radius: 1px;
      transform-origin: 100% 50%;
      transform: rotate(var(--r));
    }
    .order .truck:before { top: 4px; }
    .order .truck:after { --r: 90deg; bottom: 4px; }
    .order .truck .back { left: 0; top: 0; width: 60px; height: 41px; z-index: 1; }
    .order .truck .front {
      overflow: hidden;
      position: absolute;
      border-radius: 2px 9px 9px 2px;
      width: 26px;
      height: 41px;
      left: 60px;
    }
    .order .truck .front:before, .order .truck .front:after { content: ""; position: absolute; display: block; }
    .order .truck .front:before { height: 13px; width: 2px; left: 0; top: 14px; background: linear-gradient(var(--grey), var(--grey-dark)); }
    .order .truck .front:after { border-radius: 2px 9px 9px 2px; background: var(--primary); width: 24px; height: 41px; right: 0; }
    .order .truck .front .window {
      overflow: hidden;
      border-radius: 2px 8px 8px 2px;
      background: var(--primary-light);
      transform: perspective(4px) rotateY(3deg);
      width: 22px;
      height: 41px;
      position: absolute;
      left: 2px;
      top: 0;
      z-index: 1;
      transform-origin: 0 50%;
    }
    .order .truck .front .window:before, .order .truck .front .window:after { content: ""; position: absolute; right: 0; }
    .order .truck .front .window:before { top: 0; bottom: 0; width: 14px; background: var(--dark); }
    .order .truck .front .window:after { width: 14px; top: 7px; height: 4px; position: absolute; background: rgba(255, 255, 255, 0.14); transform: skewY(14deg); box-shadow: 0 7px 0 rgba(255, 255, 255, 0.14); }
    .order .truck .light { width: 3px; height: 8px; left: 83px; transform-origin: 100% 50%; position: absolute; border-radius: 2px; transform: scaleX(0.8); background: #f0dc5f; }
    .order .truck .light:before { content: ""; height: 4px; width: 7px; opacity: 0; transform: perspective(2px) rotateY(-15deg) scaleX(0.94); position: absolute; transform-origin: 0 50%; left: 3px; top: 50%; margin-top: -2px; background: linear-gradient(90deg, #f0dc5f, rgba(240, 220, 95, 0.7), rgba(240, 220, 95, 0)); }
    .order .truck .light.top { top: 4px; }
    .order .truck .light.bottom { bottom: 4px; }
    .order .box { --start: var(--sand-light); --stop: var(--sand); width: 21px; height: 21px; right: 100%; top: 21px; }
    .order .box:before, .order .box:after { content: ""; top: 10px; position: absolute; left: 0; right: 0; }
    .order .box:before { height: 3px; margin-top: -1px; background: rgba(0, 0, 0, 0.1); }
    .order .box:after { height: 1px; background: rgba(0, 0, 0, 0.15); }
    .order.animate .default { --o: 0; transition-delay: 0s; }
    .order.animate .success { --offset: 0; --o: 1; transition-delay: 7s; }
    .order.animate .success svg { transition-delay: 7.3s; }
    .order.animate .truck { -webkit-animation: truck 10s ease forwards; animation: truck 10s ease forwards; }
    .order.animate .truck:before { -webkit-animation: door1 2.4s ease forwards 0.3s; animation: door1 2.4s ease forwards 0.3s; }
    .order.animate .truck:after { -webkit-animation: door2 2.4s ease forwards 0.6s; animation: door2 2.4s ease forwards 0.6s; }
    .order.animate .truck .light:before, .order.animate .truck .light:after { -webkit-animation: light 10s ease forwards; animation: light 10s ease forwards; }
    .order.animate .box { -webkit-animation: box 10s ease forwards; animation: box 10s ease forwards; }
    .order.animate .lines { -webkit-animation: lines 10s ease forwards; animation: lines 10s ease forwards; }

    @-webkit-keyframes truck {
      10%, 30% { transform: translateX(-164px); }
      40% { transform: translateX(-104px); }
      60% { transform: translateX(-224px); }
      75%, 100% { transform: translateX(24px); }
    }
    @keyframes truck {
      10%, 30% { transform: translateX(-164px); }
      40% { transform: translateX(-104px); }
      60% { transform: translateX(-224px); }
      75%, 100% { transform: translateX(24px); }
    }
    @-webkit-keyframes lines {
      0%, 30% { opacity: 0; transform: scaleY(0.7) translateX(0); }
      35%, 65% { opacity: 1; }
      70% { opacity: 0; }
      100% { transform: scaleY(0.7) translateX(-400px); }
    }
    @keyframes lines {
      0%, 30% { opacity: 0; transform: scaleY(0.7) translateX(0); }
      35%, 65% { opacity: 1; }
      70% { opacity: 0; }
      100% { transform: scaleY(0.7) translateX(-400px); }
    }
    @-webkit-keyframes light {
      0%, 30% { opacity: 0; transform: perspective(2px) rotateY(-15deg) scaleX(0.88); }
      40%, 100% { opacity: 1; transform: perspective(2px) rotateY(-15deg) scaleX(0.94); }
    }
    @keyframes light {
      0%, 30% { opacity: 0; transform: perspective(2px) rotateY(-15deg) scaleX(0.88); }
      40%, 100% { opacity: 1; transform: perspective(2px) rotateY(-15deg) scaleX(0.94); }
    }
    @-webkit-keyframes door1 { 30%, 50% { transform: rotate(32deg); } }
    @keyframes door1 { 30%, 50% { transform: rotate(32deg); } }
    @-webkit-keyframes door2 { 30%, 50% { transform: rotate(-32deg); } }
    @keyframes door2 { 30%, 50% { transform: rotate(-32deg); } }
    @-webkit-keyframes box {
      8%, 10% { transform: translateX(40px); opacity: 1; }
      25% { transform: translateX(112px); opacity: 1; }
      26% { transform: translateX(112px); opacity: 0; }
      27%, 100% { transform: translateX(0px); opacity: 0; }
    }
    @keyframes box {
      8%, 10% { transform: translateX(40px); opacity: 1; }
      25% { transform: translateX(112px); opacity: 1; }
      26% { transform: translateX(112px); opacity: 0; }
      27%, 100% { transform: translateX(0px); opacity: 0; }
    }
  </style>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css">
</head>
<body>
  <header data-aos="fade-down" data-aos-duration="700">
    <div class="container">
      <div class="logo">
        <img src="images/garam-doodh-logo.png" alt="Garam Doodh Logo" class="logo-img">
        <p>Fresh Boiled Milk Delivered to Your Doorstep</p>
      </div>
      <button class="mobile-menu-toggle" id="mobile-menu-toggle"><i class="fas fa-bars"></i></button>
      <nav id="main-nav">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="products.html">Products</a></li>
          <li><a href="index.html#about">About Us</a></li>
          <li><a href="index.html#contact">Contact</a></li>
        </ul>
      </nav>
      <div class="cart-icon">
        <a href="cart.html" class="active"><i class="fas fa-shopping-cart"></i> <span id="cart-count">0</span></a>
      </div>
    </div>
  </header>

  <!-- CART SECTION -->
  <section class="cart-section" data-aos="fade-up">
    <div class="container">
      <h1>Your Shopping Cart</h1>
      <div id="cart-empty-message" class="cart-empty">
        <p>Your cart is empty.</p>
        <a href="products.html" class="btn">Browse Products</a>
      </div>
      <div id="cart-items-container" class="cart-items"></div>
      <div id="cart-summary" class="cart-summary">
        <div class="addon-upsell">
          <label class="addon-control">
            <input type="checkbox" id="glass-bottle-addon" />
            <span class="checkmark"></span>
            <span class="addon-text">Add Reusable Glass Bottle <strong>(+₹7)</strong></span>
          </label>
          <p class="addon-note">Keeps milk fresher, eco-friendly, one-time add-on per order</p>
        </div>
        <div class="summary-row"><span>Subtotal:</span><span id="cart-subtotal">₹0.00</span></div>
        <div class="summary-row"><span>Delivery Fee:</span><span id="delivery-fee">₹30.00</span></div>
        <div class="summary-row total"><span>Total:</span><span id="cart-total">₹0.00</span></div>
        <button id="checkout-btn" class="btn checkout-btn">Proceed to Checkout</button>
      </div>
    </div>
  </section>

  <!-- CHECKOUT SECTION -->
  <section id="checkout-form-section" class="checkout-section hidden" data-aos="fade-up">
    <div class="container">
      <h2>Checkout</h2>
      <div class="checkout-steps" aria-label="Checkout progress" data-aos="fade-up" data-aos-delay="50">
        <div class="step active"><span class="step-index">1</span><span class="step-label">Cart</span></div>
        <div class="step"><span class="step-index">2</span><span class="step-label">Details</span></div>
        <div class="step"><span class="step-index">3</span><span class="step-label">Payment</span></div>
      </div>
      <form id="checkoutForm" data-aos="fade-up" data-aos-delay="100">
        <input type="text" name="name" placeholder="Full Name" required />
        <input type="text" name="phone" placeholder="Phone" required />
        <input type="email" name="email" placeholder="Email" required />
        <input type="text" name="hostel" placeholder="Hostel (if any)" />
        <textarea name="address" placeholder="Delivery Address" rows="3" required></textarea>
        <div class="form-section">
          <h3>Payment Method</h3>
          <div class="payment-cards" id="payment-cards">
            <label class="payment-card" data-method="cod">
              <input type="radio" name="paymentMethod" value="cod" checked>
              <div class="payment-card-content">
                <i class="fas fa-money-bill-wave"></i>
                <div>
                  <strong>Cash on Delivery</strong>
                  <p>Pay when the milk arrives</p>
                </div>
              </div>
            </label>
            <label class="payment-card" data-method="online">
              <input type="radio" name="paymentMethod" value="online">
              <div class="payment-card-content">
                <i class="fas fa-credit-card"></i>
                <div>
                  <strong>Online Payment</strong>
                  <p>Secure UPI / Card via Razorpay</p>
                </div>
              </div>
            </label>
          </div>
        </div>
        <div class="order-summary">
          <h3>Order Summary</h3>
          <div id="checkout-items"></div>
          <div class="summary-row"><span>Subtotal:</span><span id="checkout-subtotal">₹0.00</span></div>
          <div class="summary-row"><span>Delivery Fee:</span><span id="checkout-delivery-fee">₹30.00</span></div>
          <div class="summary-row total"><span>Total:</span><span id="checkout-total">₹0.00</span></div>
        </div>
        <button type="submit">Place Order</button>
      </form>
      <div id="orderResult"></div>
    </div>
  </section>

  <!-- Order Animation Overlay -->
  <div id="order-animation" class="order-anim-overlay hidden" aria-hidden="true">
    <button class="order" type="button" aria-label="Order placed">
      <span class="default">Placing Order...</span>
      <span class="success">Order Placed
        <svg viewBox="0 0 12 10">
          <polyline points="1.5 6 4.5 9 10.5 1"></polyline>
        </svg>
      </span>
      <div class="box"></div>
      <div class="truck">
        <div class="back"></div>
        <div class="front">
          <div class="window"></div>
        </div>
        <div class="light top"></div>
        <div class="light bottom"></div>
      </div>
      <div class="lines"></div>
    </button>
  </div>

  <div id="order-confirmation" class="order-confirmation hidden">
    <div class="confirmation-content">
      <i class="fas fa-check-circle"></i>
      <h2>Order Placed Successfully!</h2>
      <p>Your order has been received and is being processed.</p>
      <p>Order ID: <span id="order-id"></span></p>
      <a href="index.html" class="btn">Back to Home</a>
    </div>
  </div>

  <footer data-aos="fade-up">
    <div class="container">
      <div class="footer-bottom">
        <p>&copy; 2025 GaramDoodh. All Rights Reserved.</p>
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/api.js"></script>
  <script src="js/products.js"></script>
  <script src="js/cart.js"></script>
  <script src="js/main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
  <script>document.addEventListener('DOMContentLoaded',function(){ if(window.AOS){ AOS.init({ once:true, offset:80, duration:600, easing:'ease-out'});} });</script>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>

</body>
</html>
